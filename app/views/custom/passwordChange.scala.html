@(passwordChangeForm: Form[securesocial.controllers.PasswordChange.ChangeInfo])(implicit request: RequestHeader)
@import securesocial.core.IdentityProvider
@import securesocial.core.providers.utils.RoutesHelper
@import securesocial.controllers.ProviderController

@layout.main(Messages("securesocial.passwordChange.title")) {
    <div class="container well well-small">
        @request.flash.get("error").map(msg => tags.alert()(Html(msg)))
        @request.flash.get("success").map(msg => tags.alert("info")(Html(msg)))

        @if(request.flash.get("success").isDefined) {
            @request.flash.get("success").map(msg => tags.alert("info")(Html(msg)))

            <div class="form-actions">
                <a class="btn" href="@ProviderController.toUrl">@Messages("securesocial.passwordChange.okButton")</a>
            </div>
        } else {
            <form action="@RoutesHelper.handlePasswordChange().absoluteURL(IdentityProvider.sslEnabled)"
            class="form" autocomplete= "off" method="POST" >
                <fieldset>
                    <legend>@Messages("securesocial.passwordChange.title")</legend>

                    @helper.inputPassword(
                        passwordChangeForm("currentPassword"),
                        '_label -> Messages("securesocial.passwordChange.currentPassword"),
                        'class -> "input-xlarge"
                    )

                    @helper.inputPassword(
                        passwordChangeForm("newPassword.password1"),
                        '_label -> Messages("securesocial.passwordChange.newPassword1"),
                        'class -> "input-xlarge"
                    )

                    @helper.inputPassword(
                        passwordChangeForm("newPassword.password2"),
                        '_label -> Messages("securesocial.passwordChange.newPassword2"),
                        '_error -> passwordChangeForm.error("newPassword"),
                        'class -> "input-xlarge"
                    )

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">@Messages("securesocial.passwordChange.changeButton")</button>
                        <a class="btn" href="@ProviderController.toUrl">@Messages("securesocial.signup.cancel")</a>
                    </div>
                </fieldset>
            </form>
        }
    </div>
}
