@(ligue: model.orga.Ligue, detail: model.team.MatchDetail)

@import model.team._
@import model.orga.TeamParticipant

    @displayTeam(tmd: TeamMatchDetail) = {
        <strong>@Messages("team.detail.players")</strong> <br/>
    @for(i <- 1 to 4) {
        <strong>@i</strong> @tmd.players(i - 1).name @tmd.players(i - 1).licenseNumber <br/>
    }
        <br/>

        <strong>@Messages("team.detail.doublettes")</strong> <br/>
        <strong>1</strong> @tmd.doublettes._1.name <br/>
        <strong>2</strong> @tmd.doublettes._2.name <br/>
        <br/>

        <strong>@Messages("team.detail.substitute")</strong>
    @tmd.substitute.map(_.player.name) @tmd.substitute.map(_.player.licenseNumber) <br/>
        <strong>@Messages("team.detail.substitute.who")</strong>
    @tmd.substitute.map(_.replace.map(_.name)) <br/>
        <strong>@Messages("team.detail.substitute.after")</strong>
    @tmd.substitute.map(_.afterMatch.getOrElse("")) <br/>
    }

    @leg(player: TeamParticipant, leg: Leg) = {
    @if(leg.winner == player) {
        <i class="glyphicons ok_2"></i>
    } else { &nbsp;}
    }

    @displayMatch(i: Int, m: Match) = {

        <table class="match">
            <tr>
                <th colspan="3">
                    @if(m.player1Start) {
                        <i class="glyphicons asterisk"></i>
                    }
                    @if(m.winner == m.player1) {
                        <span class="win">@m.player1.name</span>
                    } else {
                        <span class="loose">@m.player1.name</span>
                    }
                </th>
            </tr>
            <tr>
                <td>@leg(m.player1, m.legs._1)</td>
                <td>@leg(m.player1, m.legs._2)</td>
                @if(m.legs._3.isDefined) {
                    <td>@leg(m.player1, m.legs._3.get)</td>
                } else {
                    <td class="inactive">&nbsp;</td>
                }
            </tr>
            <tr>
                <td>@leg(m.player2, m.legs._1)</td>
                <td>@leg(m.player2, m.legs._2)</td>
                @if(m.legs._3.isDefined) {
                    <td>@leg(m.player2, m.legs._3.get)</td>
                } else {
                    <td class="inactive">&nbsp;</td>
                }
            </tr>
            <tr>
                <th colspan="3">
                    @if(!m.player1Start) {
                        <i class="glyphicons asterisk"></i>
                    }
                    @if(m.winner == m.player1) {
                        <span class="win">@m.player2.name</span>
                    } else {
                        <span class="loose">@m.player2.name</span>
                    }
                </th>
            </tr>
        </table>
    }
@layout.pdf(Messages("team.detail.title", detail)) {
    @detail match {
        case MatchDetailFail(_, _, _, fails) => {
            @Messages("team.detail.fail", fails)
        }
        case PlayedMatchDetail(day, date, location, team1, team2, matches) => {
            <h3>
                @Messages("championship.day.caption", day) -
            <span class="@tags.winLooseDraw(detail.plus(team1.team), detail.plus(team2.team))">@team1.team</span>
                vs.
            <span class="@tags.winLooseDraw(detail.plus(team2.team), detail.plus(team1.team))">@team2.team</span>
            </h3>
            <strong>@Messages("team.detail.day")</strong> @detail.day
            <strong>@Messages("team.detail.date")</strong> @tags.date(date)
            <strong>@Messages("team.detail.location")</strong> @location </br>
            <!-- team -->
            <table class="full">
                <tr>
                    <th>@team1.team</th>
                    <th>@team2.team</th>
                </tr>
                <tr>
                    <td>@displayTeam(team1)</td>
                    <td>@displayTeam(team2)</td>
                </tr>
            </table>

            <table class="full">
                <tr>
                    <td>
                            <!-- match -->
                        <table>
                        @for(i <- 0 to 3) {
                            <tr>
                            @for(j <- 0 to 4) {
                                <td>@displayMatch((4 * i) + j + 1, matches((4 * i) + j))</td>
                            }
                            </tr>
                        }
                        </table>
                    </td>
                    <td>
                            <!-- match2 -->
                        <table>
                            <caption>@Messages("team.detail.score")</caption>
                            @for(i <- 1 to 20) {
                                <tr>
                                    <td>
                                    @if(matches(i - 1).teamWinner == team1.team) {
                                        <i class="glyphicons check"></i>
                                    } else {
                                        <i class="glyphicons unchecked"></i>
                                    }
                                    </td>
                                    <td><strong>@i</strong></td>
                                    <td>
                                    @if(matches(i - 1).teamWinner == team2.team) {
                                        <i class="glyphicons check"></i>
                                    } else {
                                        <i class="glyphicons unchecked"></i>
                                    }

                                    </td>
                                </tr>
                            }
                        </table>
                    </td>
                </tr>
            </table>
            <table class="full">
                <tr>
                    <td>
                        <!-- Results -->
                        <table class="table table-bordered table-striped table-condensed result">
                            <caption>@Messages("team.detail.result")</caption>
                            <thead>
                                <tr>
                                    <th>@team1.team.name</th>
                                    <th></th>
                                    <th>@team2.team.name</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td class="@tags.winLooseDraw(detail.plus(team1.team), detail.plus(team2.team))">
                                    @detail.plus(team1.team)
                                    </td>
                                    <th>@Messages("team.detail.matches")</th>
                                    <td class="@tags.winLooseDraw(detail.plus(team2.team), detail.plus(team1.team))">
                                    @detail.plus(team2.team)
                                    </td>
                                </tr>
                                <tr>
                                    <td class="@tags.winLooseDraw(detail.legs(team1.team), detail.legs(team2.team))">
                                    @detail.legs(team1.team)
                                    </td>
                                    <th>@Messages("team.detail.legs")</th>
                                    <td class="@tags.winLooseDraw(detail.legs(team2.team), detail.legs(team1.team))">
                                    @detail.legs(team2.team)
                                    </td>
                                </tr>
                                <tr>
                                    <td class="@tags.winLooseDraw(detail.points(team1.team), detail.points(team2.team))">
                                    @detail.points(team1.team)
                                    </td>
                                    <th>@Messages("team.detail.points")</th>
                                    <td class="@tags.winLooseDraw(detail.points(team2.team), detail.points(team1.team))">
                                    @detail.points(team2.team)
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </td>
                    <td>
                            <!-- Capitain -->
                        <table>
                            <caption>@Messages("team.detail.capitain")</caption>
                            <tr>
                                <td>
                                    <strong>@team1.team</strong> @team1.capitain.name <i class="glyphicons ok_2"></i>
                                </td>
                                <td>
                                    <strong>@team2.team</strong> @team2.capitain.name <i class="glyphicons ok_2"></i>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
            </table>
        }
    }
}
