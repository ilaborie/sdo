@(json: play.api.libs.json.JsValue,
        result: play.api.libs.json.JsValue,
        team1: model.orga.Team,
        t1: play.api.libs.json.JsValue,
        team2: model.orga.Team,
        t2: play.api.libs.json.JsValue)

@import play.api.libs.json._
@import model.orga._

@nullableAsString(json: JsValue) = {@if(json.toString() != "null"){@Html(json.toString()) } else { }}

@teamAsString(team: Team, json: JsValue, substitute: JsValue) = {team: @{team.shortName}
capitain: @{json \ "capitain"}
joueurs:
  - @Html((json \ "players").as[JsArray].value.map(_.as[String]).mkString("\n    - "))
doubles:
  -
    j1: @nullableAsString(json \ "d1" \ "j1")
    j2: @nullableAsString(json \ "d1" \ "j2")
  -
    j1: @nullableAsString(json \ "d2" \ "j1" )
    j2: @nullableAsString(json \ "d2" \ "j2" )
substitute:
  j: @nullableAsString(substitute \ "j")
  out: @nullableAsString(substitute \ "out")
  match: @nullableAsString(substitute \ "out")}

@matchAsString(json: JsValue, index: Int) = {match@{index + 1}:
    l1: @legAsString(json \ "leg1")
    l2: @legAsString(json \ "leg2")
    l3: @legAsString(json \ "leg3")}

@legAsString(json: JsValue) = {@json.as[JsNumber].value.toInt match {
        case 1 => {1}
        case 2 => {2}
        case _ => { }}}

@matches(matches: JsArray) = {@matches.value.zipWithIndex.map {
    case (js, index) => {@matchAsString(js, index)
}}}

<html>
    <body>
        <label>day</label>
        <input type="text" value="d@{json \ "day"}"/>
        <br>

        <label>file</label>
        <input type="text" value="@{team1.shortName}-@{team2.shortName}.yml"/>
        <br>

        <label>comment</label>
        <textarea>@{json \ "comment"}</textarea>
        <br>
<pre>date: @{result \ "date"}
location: @{result \ "location"}
team1: @teamAsString(team1, t1, t1 \ "substitute")
team2: @teamAsString(team2, t2, t2 \ "substitute")
matches: @matches((result \ "matches").as[JsArray])</pre>
    </body>
</html>
